<!-- project.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ahnheewon | Project</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../@/assets/ahwsq3x.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../@/assets/ahwsq3x.png" />
    <link href = '../@/css/style.css' rel = 'stylesheet'>
    <link href = '../@/css/project.css' rel = 'stylesheet'>
</head>
<body>

<div id = 'header'>
    <h1 id="title">Loading Project...</h1>
</div>

<div id = 'container'>
    <div id = 'main'>

    </div>
</div>

<script>
    // Load project data dynamically from a JSON file
    function loadProjectData(projectID) {
        // Add a cache-busting query parameter to prevent caching issues
        fetch(`/design/projects.json?t=${new Date().getTime()}`)  // Fetch with cache-busting
            .then(response => response.json())
            .then(data => {
                const project = data.projects[projectID];
                if (project) {
                    document.getElementById('title').innerText = project.title;

                    // Clear any previous images
                    const galleryDiv = document.getElementById('main');
                    galleryDiv.innerHTML = '';

                    // Add images to the gallery
                    project.images.forEach(image => {
                        /*
                        const imgElement = document.createElement('img');
                        const titleElement = document.createElement('expo');
                        imgElement.src = image.url;
                        imgElement.alt = image.caption;
                        galleryDiv.appendChild(imgElement);
                        */
                        let div =
                        `
                        <div class = 'item'>
                            <img src = '${image.url}' class = 'img' alt = '${image.caption}'>
                            <div class = 'expo'>
                                <h1>
                                    ${image.caption}
                                </h1>
                                <p>
                                    Hello
                                </p>
                            </div>
                        </div>
                        `

                        galleryDiv.innerHTML = galleryDiv.innerHTML + div
                    });
                } else {
                    document.getElementById('project-title').innerText = 'Project not found';
                }
            })
            .catch(error => {
                console.error('Error loading project data:', error);
                document.getElementById('project-title').innerText = 'Error loading project';
            });
    }

    // Get project ID from the URL path
    const projectID = window.location.pathname.split('/').pop(); // e.g., /design/project-1 -> project-1
    loadProjectData(projectID);  // Load project data based on the project ID
</script>

</body>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script src = '../@/js/functions.js'></script>
<script src = '../@/js/project.js'></script>
</html>
