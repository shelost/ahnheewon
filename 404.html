<!-- 404.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ahnheewon | Project </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&family=Noto+Serif+JP:wght@200..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="icon" type="image/png" sizes="32x32" href="@/assets/ahwsq3x.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="@/assets/ahwsq3x.png" />
    <script>
        (function() {
            var path = window.location.pathname;

            // Check if the URL matches /design/<project-id>
            if (path.startsWith('/design/')) {
                var projectID = path.split('/').pop(); // Extract project ID

                // Load the project.html content without changing the URL
                fetch('/design/project.html')
                    .then(response => response.text())
                    .then(html => {
                        document.open();
                        document.write(html);
                        document.close();

                        // Update the project page content dynamically
                        loadProjectData(projectID);
                    });
            } else {
                document.body.innerHTML = '<h1>404 - Page Not Found</h1>';
            }
        })();

        // Function to dynamically load project data based on project ID
        function loadProjectData(projectID) {
            // Add a cache-busting query parameter to prevent caching issues
            fetch(`/design/projects.json?t=${new Date().getTime()}`)  // Fetch with cache-busting
                .then(response => response.json())
                .then(data => {
                    var project = data.projects[projectID];
                    if (project) {
                        document.getElementById('project-title').innerText = project.title;

                        // Clear any previous images
                        var galleryDiv = document.getElementById('main');
                        galleryDiv.innerHTML = '';

                        // Add images to the gallery
                        project.images.forEach(function(image) {
                            var imgElement = document.createElement('img');
                            imgElement.src = image.url;
                            imgElement.alt = image.caption;
                            //galleryDiv.appendChild(imgElement);


                        });
                    } else {
                        document.getElementById('project-title').innerText = 'Project not found';
                    }
                })
                .catch(error => {
                    console.error('Error loading project data:', error);
                    document.getElementById('project-title').innerText = 'Error loading project';
                });
        }
    </script>
</head>
<body>
    <h1 id="project-title"> ahnheewon </h1>
    <div class="gallery" id="gallery"></div>
</body>
</html>
